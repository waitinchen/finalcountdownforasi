# 📊 心與術平衡指數計算說明

## 🎯 計算公式（C謀規格）

### 步驟 1: 計算「術」的平均值

```
avgTech = (tone + components + infrastructure + convergence) / 4
```

**術 = 媒體語氣 + 關鍵元件 + 基建演化 + 跨域整合的平均值**

---

### 步驟 2: 計算心與術平衡指數

```
balance_index = (hcmi / avgTech) * 100
```

**心與術平衡指數 = (心智認知 / 術的平均值) × 100**

---

## 📐 實際計算範例（160 的來源）

### 輸入數據（從圖片中）

```
媒體語氣 (tone): 10
關鍵元件 (components): 57
基建演化 (infrastructure): 57
跨域整合 (convergence): 119
心智認知 (hcmi): 97
```

### 計算過程

#### 步驟 1: 計算術的平均值

```
avgTech = (10 + 57 + 57 + 119) / 4
        = 243 / 4
        = 60.75
```

#### 步驟 2: 計算心與術平衡指數

```
balance_index = (97 / 60.75) × 100
              = 1.5967... × 100
              = 159.67
              ≈ 160 (四捨五入)
```

---

## 📊 數值意義

### 平衡指數範圍

- **0-30**: 極度失衡（心遠落後於術）
- **30-60**: 偏術（術領先心）
- **60-100**: 偏平衡（接近平衡）
- **100**: 完全平衡（心 = 術）
- **>100**: 心領術（心領先術）

### 當前數值 160 的意義

- **160 > 100** → **心領術**
- 表示：心智認知（97）遠高於技術平均值（60.75）
- 狀態：文明的心智成熟度領先於技術發展速度
- 這是一個**理想狀態**（心領先術）

---

## 🔍 公式驗證

### 為什麼是這個公式？

1. **100 = 完全平衡**
   - 當 `hcmi = avgTech` 時，`balance_index = 100`
   - 表示心與術完全同步

2. **>100 = 心領術**
   - 當 `hcmi > avgTech` 時，`balance_index > 100`
   - 表示心智成熟度領先技術發展

3. **<100 = 術領先心**
   - 當 `hcmi < avgTech` 時，`balance_index < 100`
   - 表示技術發展速度超過心智成熟度（可能帶來風險）

---

## 💻 代碼實現位置

### 主要計算邏輯

**文件**: `lib/dataTransform.ts`

```typescript
// 計算術的平均值（媒體、關鍵元件、基建、整合）
const avgTech = (tone + components + infrastructure + convergence) / 4;

// 計算心術平衡指數（C謀公式：hcmi / avgTech * 100）
const balanceIndex = avgTech > 0 ? (hcmi / avgTech) * 100 : 0;
```

### 所有使用位置

1. `lib/dataTransform.ts` - 數據轉換函式
2. `app/api/readiness/route.ts` - API 路由
3. `app/api/sheets/civilization/route.ts` - Sheet API 路由
4. `lib/api.ts` - API 工具函式
5. 所有組件的回退數據計算

---

## ✅ 驗證結果

**使用當前數據計算**：
- 術平均值：60.75
- 心與術平衡指數：159.67 ≈ **160** ✅

**計算公式正確！** 🎯

---

## 📝 注意事項

1. **除零保護**：當 `avgTech = 0` 時，返回 0
2. **四捨五入**：最終結果使用 `Math.round()` 取整
3. **範圍**：理論上可以超過 200（當心遠超術時）

---

**公式已完全掌握並正確實施！** ✨

